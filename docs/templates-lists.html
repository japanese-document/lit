<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:url" content="https://japanese-document.github.io/lit/templates-lists.html" />
    <meta property="og:title" content="リスト" />
    <meta property="og:description" content="Litでは標準のJavaScriptを使って繰り返し処理をするテンプレートを作成することができます。また、Litは特定の条件を満たすリストからテンプレートをより効率的に生成するためのrepeatディレクティブを用意しています。#配列をレンダリングするchild expressionの位置に配列やiterableを置くと、Litは下記のように配列内のすべての要素をレンダリングします。@property() colors = ['red', 'green', 'blue'];render() {  return html`<p>Colors: ${this.colors}</p>`;}// Col" />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/42838312?s=400" />
    <meta name="theme-color" content="#f1f7fe" />
    <meta name="description" content="Litでは標準のJavaScriptを使って繰り返し処理をするテンプレートを作成することができます。また、Litは特定の条件を満たすリストからテンプレートをより効率的に生成するためのrepeatディレクティブを用意しています。#配列をレンダリングするchild expressionの位置に配列やiterableを置くと、Litは下記のように配列内のすべての要素をレンダリングします。@property() colors = ['red', 'green', 'blue'];render() {  return html`<p>Colors: ${this.colors}</p>`;}// Col" />
    <meta name="Hatena::Bookmark" content="nocomment" />
    <title>リスト</title>
    <link rel="stylesheet" href="/lit/app.css?v=001" type="text/css"  media="all" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L9VVC74WWF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-L9VVC74WWF');
    </script>
  </head>
  <body class="container">
    <div class="left-side">
    <nav class="index-menu">
      <details open="">
        <summary>コンポーネント</summary>
        <p><a href="https://japanese-document.github.io/lit/components-defining.html">定義</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-rendering.html">レンダリング</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-properties.html">リアクティブプロパティ</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-styles.html">スタイル</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-lifecycle.html">ライフサイクル</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-shadow-dom.html">Shadow DOM</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-events.html">イベント</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-decorators.html">デコレータ</a></p>
      </details>
      <details open="">
        <summary>テンプレート</summary>
        <p><a href="https://japanese-document.github.io/lit/templates-expressions.html">エクスプレッション</a></p>
        <p><a href="https://japanese-document.github.io/lit/templates-lists.html">リスト</a></p>
        <p><a href="https://japanese-document.github.io/lit/templates-directives.html">ビルトインディレクティブ</a></p>
        <p><a href="https://japanese-document.github.io/lit/templates-custom-directives.html">カスタムディレクティブ</a></p>
      </details>
      <details open="">
        <summary>組み合わせ</summary>
        <p><a href="https://japanese-document.github.io/lit/composition-controllers.html">リアクティブコントローラ</a></p>
      </details>
      <details open="">
        <summary>API</summary>
        <p><a href="https://japanese-document.github.io/lit/api-LitElement.html">LitElement</a></p>
        <p><a href="https://japanese-document.github.io/lit/api-templates.html">テンプレート</a></p>
      </details>
    </nav></div>
    <main class="main markdown-body">
      <h1 id="リスト"><a class="anchor" href="#リスト">#</a>リスト</h1>
<p>Litでは標準のJavaScriptを使って繰り返し処理をするテンプレートを作成することができます。
また、Litは特定の条件を満たすリストからテンプレートをより効率的に生成するための<code>repeat</code>ディレクティブを用意しています。</p>
<h2 id="配列をレンダリングする"><a class="anchor" href="#配列をレンダリングする">#</a>配列をレンダリングする</h2>
<p>child expressionの位置に配列やiterableを置くと、Litは下記のように配列内のすべての要素をレンダリングします。</p>
<pre><code class="language-ts">@property() colors = ['red', 'green', 'blue'];

render() {
  return html`&lt;p&gt;Colors: ${this.colors}&lt;/p&gt;`;
}
// Colors: redgreenblue
</code></pre>
<p>ほとんどの場合、上記のようにそのまま使うことはないでしょう。</p>
<h2 id="mapを使って繰り返しテンプレートを作成する"><a class="anchor" href="#mapを使って繰り返しテンプレートを作成する">#</a>mapを使って繰り返しテンプレートを作成する</h2>
<p>リストをレンダリングする際に、下記のように<code>map</code>を使って、データのリストをテンプレートのリストに変更することができます。</p>
<pre><code class="language-ts">@property() colors = ['red', 'green', 'blue'];

render() {
  return html`
    &lt;ul&gt;
      ${this.colors.map((color) =&gt;
        html`&lt;li style="color: ${color}"&gt;${color}&lt;/li&gt;`
      )}
    &lt;/ul&gt;
  `;
}
// ・ red
// ・ green
// ・ blue
</code></pre>
<p>上記のエクスプレッションが<code>TemplateResult</code>オブジェクトの配列を返していることに注目してください。
Litはサブテンプレートやそれ以外の値を値に持つ配列やiterableをレンダリングします。</p>
<h2 id="ループを使って繰り返しテンプレートを作成する"><a class="anchor" href="#ループを使って繰り返しテンプレートを作成する">#</a>ループを使って繰り返しテンプレートを作成する</h2>
<p>下記のようにテンプレートの配列を作成して、それをエクスプレッション内に配置することができます。</p>
<pre><code class="language-ts">render() {
  const itemTemplates = [];
  for (const i of this.items) {
    itemTemplates.push(html`&lt;li&gt;${i}&lt;/li&gt;`);
  }

  return html`
    &lt;ul&gt;
      ${itemTemplates}
    &lt;/ul&gt;
  `;
}
</code></pre>
<h2 id="repeatディレクティブ"><a class="anchor" href="#repeatディレクティブ">#</a>repeatディレクティブ</h2>
<p>ほとんどの場合、ループや<code>map</code>を使って繰り返しテンプレートを作成することは効率的です。
しかし、大きなリストの順番を入れ替える、要素を追加する、要素を削除する場合では、
このアプローチは多数のDOM Nodeの更新を引き起こす可能性があります。</p>
<p>そんな時は<code>repeat</code>ディレクティブの出番です。</p>
<p><code>repeat</code>ディレクティブは渡されたキーに基づいてリストを効率的に更新します。</p>
<pre><code class="language-ts">repeat(items, keyFunction, itemTemplate)
</code></pre>
<ul>
<li><code>items</code>は配列もしくはiterableです。</li>
<li><code>keyFunction</code>は<code>items</code>の要素を引数に取り、その値からユニークなキーを返す関数です。</li>
<li><code>itemTemplate</code> は<code>items</code>の要素とそのインデックスを引数に取り、<code>TemplateResult</code>を返す関数です。</li>
</ul>
<p>例:</p>
<pre><code class="language-js">import {repeat} from 'lit/directives/repeat.js';
// ...
render() {
  return html`
    &lt;ul&gt;
      ${repeat(this.employees, (employee) =&gt; employee.id, (employee, index) =&gt; html`
        &lt;li&gt;${index}: ${employee.familyName}, ${employee.givenName}&lt;/li&gt;
      `)}
    &lt;/ul&gt;
    &lt;button @click=${this.toggleSort}&gt;Toggle sort&lt;/button&gt;
  `;
}
// ...
</code></pre>
<p>配列の<code>employees</code>を再ソートすると、<code>repeat</code>ディレクティブは既存のNodeを並び変えます。</p>
<p>上記の名前の<code>&lt;li&gt;</code>をリバースすると仮定して、<code>repeat</code>ディレクティブと<code>map</code>を使った処理内容を比べます。</p>
<ul>
<li><code>map</code>を使って<code>&lt;li&gt;</code>を生成した場合、Litは既存のDOM Nodeに対応する<code>&lt;li&gt;</code>のコンテンツを適用します。</li>
<li><code>repeat</code>を使って<code>&lt;li&gt;</code>を生成した場合、<code>repeat</code>ディレクティブは既存のDOM Node(<code>&lt;li&gt;</code>)を並び変えます。(最初のNodeは最後に移動します。)</li>
</ul>
<h3 id="mapとrepeatの使い分け"><a class="anchor" href="#mapとrepeatの使い分け">#</a>mapとrepeatの使い分け</h3>
<p>Which repeat is more efficient depends on your use case:</p>
<ul>
<li><p>If updating the DOM nodes is more expensive than moving them, use the <code>repeat</code> directive.</p>
</li>
<li><p>If the DOM nodes have state that <em>isn't</em> controlled by a template expression, use the <code>repeat</code> directive.</p>
<p>For example, consider this list:</p>
<pre><code class="language-js">html`${this.users.map((user) =&gt;
  html`
    &lt;div&gt;&lt;input type="checkbox"&gt; ${user.name}&lt;/div&gt;
  `)
}`
</code></pre>
<p>The checkbox has a checked or unchecked state, but it isn't controlled by a template expression.</p>
<p>If  you reorder the list after the user has checked one or more checkboxes, Lit would update the names associated with the checkboxes, but not the state of the checkboxes.</p>
</li>
</ul>
<p> If neither of these situations apply, use <code>map</code> or looping statements.</p>
<hr>
<h2 id="License"><a class="anchor" href="#License">#</a>License</h2>
<h3 id="Japanese_part"><a class="anchor" href="#Japanese_part">#</a>Japanese part</h3>
<p><a class="Link" href="https://creativecommons.org/licenses/by-nc/4.0/legalcode">Creative Commons Attribution-NonCommercial 4.0 International Public License</a></p>
<p>Copyright (c) 2022 38elements</p>
<h3 id="Other"><a class="anchor" href="#Other">#</a>Other</h3>
<p><a class="Link" href="https://creativecommons.org/licenses/by/3.0/deed.en">Creative Commons Attribution 3.0 Unported</a></p>
<p>Copyright (c) 2020 Google LLC. All rights reserved.</p>
<p>BSD 3-Clause License</p>
<p>Copyright (c) 2020 Google LLC. All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p>
<ol>
<li><p>Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.</p>
</li>
<li><p>Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.</p>
</li>
<li><p>Neither the name of the copyright holder nor the names of its
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.</p>
</li>
</ol>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

    </main>
    <div class="right-side"><nav class="header-list"><p class="h1"><a href="#リスト">リスト</a></p>
<p class="h2"><a href="#配列をレンダリングする">配列をレンダリングする</a></p>
<p class="h2"><a href="#mapを使って繰り返しテンプレートを作成する">mapを使って繰り返しテンプレートを作成する</a></p>
<p class="h2"><a href="#ループを使って繰り返しテンプレートを作成する">ループを使って繰り返しテンプレートを作成する</a></p>
<p class="h2"><a href="#repeatディレクティブ">repeatディレクティブ</a></p>
<p class="h3"><a href="#mapとrepeatの使い分け">mapとrepeatの使い分け</a></p>
<p class="h2"><a href="#License">License</a></p>
<p class="h3"><a href="#Japanese_part">Japanese part</a></p>
<p class="h3"><a href="#Other">Other</a></p></nav></div>
    <footer class="footer markdown-body">
      <a href="/lit">Top</a>
    </footer>
  </body>
</html>