<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:url" content="https://japanese-document.github.io/lit/components-events.html" />
    <meta property="og:title" content="ã‚¤ãƒ™ãƒ³ãƒˆ" />
    <meta property="og:description" content="ã‚¤ãƒ™ãƒ³ãƒˆã¯è¦ç´ ãŒå¤‰åŒ–ã‚’ä¼ãˆã‚‹æ¨™æº–çš„ãªæ–¹æ³•ã§ã™ã€‚é€šå¸¸ã€ãã‚Œã‚‰ã®å¤‰åŒ–ã¯ãƒ¦ãƒ¼ã‚¶ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ç™ºç”Ÿã—ã¾ã™ã€‚ä¾‹ãˆã°ã€buttonè¦ç´ ã¯ãƒ¦ãƒ¼ã‚¶ã«ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã«clickã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ã¾ã™ã€‚inputè¦ç´ ã¯ãƒ¦ãƒ¼ã‚¶ãŒå€¤ã‚’å…¥åŠ›ã™ã‚‹ã¨changeã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ã¾ã™ã€‚Litã§ä½œã£ãŸcustom elementsã¯ã“ã‚Œã‚‰ã®è‡ªå‹•çš„ã«dispatchã•ã‚Œã‚‹Webæ¨™æº–ã®ã‚¤ãƒ™ãƒ³ãƒˆã«åŠ ãˆã¦ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€menuè¦ç´ ã¯é …ç›®ãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’ç¤ºã™ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã§ã—ã‚‡ã†ã€‚popupè¦ç´ ã¯ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒé–‹ã„ãŸã‚Šé–‰ã˜ãŸã‚Šã™ã‚‹ã¨ãã«" />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/42838312?s=400" />
    <meta name="theme-color" content="#f1f7fe" />
    <meta name="description" content="ã‚¤ãƒ™ãƒ³ãƒˆã¯è¦ç´ ãŒå¤‰åŒ–ã‚’ä¼ãˆã‚‹æ¨™æº–çš„ãªæ–¹æ³•ã§ã™ã€‚é€šå¸¸ã€ãã‚Œã‚‰ã®å¤‰åŒ–ã¯ãƒ¦ãƒ¼ã‚¶ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ç™ºç”Ÿã—ã¾ã™ã€‚ä¾‹ãˆã°ã€buttonè¦ç´ ã¯ãƒ¦ãƒ¼ã‚¶ã«ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã«clickã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ã¾ã™ã€‚inputè¦ç´ ã¯ãƒ¦ãƒ¼ã‚¶ãŒå€¤ã‚’å…¥åŠ›ã™ã‚‹ã¨changeã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ã¾ã™ã€‚Litã§ä½œã£ãŸcustom elementsã¯ã“ã‚Œã‚‰ã®è‡ªå‹•çš„ã«dispatchã•ã‚Œã‚‹Webæ¨™æº–ã®ã‚¤ãƒ™ãƒ³ãƒˆã«åŠ ãˆã¦ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€menuè¦ç´ ã¯é …ç›®ãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’ç¤ºã™ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã§ã—ã‚‡ã†ã€‚popupè¦ç´ ã¯ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒé–‹ã„ãŸã‚Šé–‰ã˜ãŸã‚Šã™ã‚‹ã¨ãã«" />
    <meta name="Hatena::Bookmark" content="nocomment" />
    <title>ã‚¤ãƒ™ãƒ³ãƒˆ</title>
    <link rel="icon" type="image/png" href="/lit/images/favicon.png" />
    <link rel="stylesheet" href="/lit/app.css?v=001" type="text/css"  media="all" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L9VVC74WWF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-L9VVC74WWF');
    </script>
  </head>
  <body class="container">
    <div class="left-side">
    <nav class="index-menu">
      <details open="">
        <summary>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</summary>
        <p><a href="https://japanese-document.github.io/lit/components-defining.html">å®šç¾©</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-rendering.html">ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-properties.html">ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-styles.html">ã‚¹ã‚¿ã‚¤ãƒ«</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-lifecycle.html">ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-shadow-dom.html">Shadow DOM</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-events.html">ã‚¤ãƒ™ãƒ³ãƒˆ</a></p>
        <p><a href="https://japanese-document.github.io/lit/components-decorators.html">ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿</a></p>
      </details>
      <details open="">
        <summary>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</summary>
        <p><a href="https://japanese-document.github.io/lit/templates-expressions.html">ã‚¨ã‚¯ã‚¹ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³</a></p>
        <p><a href="https://japanese-document.github.io/lit/templates-conditionals.html">æ¡ä»¶</a></p>
        <p><a href="https://japanese-document.github.io/lit/templates-lists.html">ãƒªã‚¹ãƒˆ</a></p>
        <p><a href="https://japanese-document.github.io/lit/templates-directives.html">ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–</a></p>
        <p><a href="https://japanese-document.github.io/lit/templates-custom-directives.html">ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–</a></p>
      </details>
      <details open="">
        <summary>çµ„ã¿åˆã‚ã›</summary>
        <p><a href="https://japanese-document.github.io/lit/composition-component.html">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã‚‹</a></p>
        <p><a href="https://japanese-document.github.io/lit/composition-controllers.html">ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©</a></p>
      </details>
      <details open="">
        <summary>API</summary>
        <p><a href="https://japanese-document.github.io/lit/api-LitElement.html">LitElement</a></p>
        <p><a href="https://japanese-document.github.io/lit/api-templates.html">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</a></p>
      </details>
    </nav></div>
    <main class="main markdown-body">
      <h1 id="ã‚¤ãƒ™ãƒ³ãƒˆ"><a class="anchor" href="#ã‚¤ãƒ™ãƒ³ãƒˆ">#</a>ã‚¤ãƒ™ãƒ³ãƒˆ</h1>
<p>ã‚¤ãƒ™ãƒ³ãƒˆã¯è¦ç´ ãŒå¤‰åŒ–ã‚’ä¼ãˆã‚‹æ¨™æº–çš„ãªæ–¹æ³•ã§ã™ã€‚
é€šå¸¸ã€ãã‚Œã‚‰ã®å¤‰åŒ–ã¯ãƒ¦ãƒ¼ã‚¶ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰ç™ºç”Ÿã—ã¾ã™ã€‚
ä¾‹ãˆã°ã€buttonè¦ç´ ã¯ãƒ¦ãƒ¼ã‚¶ã«ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã«clickã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ã¾ã™ã€‚
inputè¦ç´ ã¯ãƒ¦ãƒ¼ã‚¶ãŒå€¤ã‚’å…¥åŠ›ã™ã‚‹ã¨changeã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ã¾ã™ã€‚</p>
<p>Litã§ä½œã£ãŸcustom elementsã¯ã“ã‚Œã‚‰ã®è‡ªå‹•çš„ã«dispatchã•ã‚Œã‚‹Webæ¨™æº–ã®ã‚¤ãƒ™ãƒ³ãƒˆã«åŠ ãˆã¦ã€ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä¾‹ãˆã°ã€menuè¦ç´ ã¯é …ç›®ãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’ç¤ºã™ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã§ã—ã‚‡ã†ã€‚
popupè¦ç´ ã¯ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒé–‹ã„ãŸã‚Šé–‰ã˜ãŸã‚Šã™ã‚‹ã¨ãã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã§ã—ã‚‡ã†ã€‚</p>
<p>JavaScriptã®ã‚³ãƒ¼ãƒ‰ã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒªãƒƒã‚¹ãƒ³ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆã«ç´ã¥ã„ãŸå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä¾‹ãˆã°toolbarè¦ç´ ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é …ç›®ãŒé¸æŠã•ã‚ŒãŸæ™‚ã€ãƒªã‚¹ãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã§ã—ã‚‡ã†ã€‚
loginè¦ç´ ã¯ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã‚‹ã¨ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã§ã—ã‚‡ã†ã€‚</p>
<h2 id="ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°"><a class="anchor" href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°">#</a>ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°</h2>
<p>Litã¯Webæ¨™æº–ã®<code>addEventListener</code> APIã ã‘ã§ãªãã€å®£è¨€çš„ãªæ–¹æ³•ã§ã‚‚è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<h3 id="ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã‚‹"><a class="anchor" href="#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã‚‹">#</a>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã‚‹</h3>
<p><a class="Link" href="https://japanese-document.github.io/lit/templates-expressions.html#Event_listener_expressions">Event listener expressions</a>ã‚’ä½¿ã†ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã®å®£è¨€çš„ãªæ–¹æ³•ã§ä»˜ä¸ã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹æ™‚ã«è¦ç´ ã«åŠ ãˆã‚‰ã‚Œã¾ã™ã€‚</p>
<h4 id="ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹"><a class="anchor" href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹">#</a>ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹</h4>
<p>å®£è¨€çš„ãªæ–¹æ³•ã§ä»˜ä¸ã•ã‚Œã‚‹ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã«(<code>passive</code>ã‚„<code>capture</code>ã®ã‚ˆã†ãª)ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ã«ã¯<code>@eventOptions</code>ã‚’ä½¿ã„ã¾ã™ã€‚
<code>@eventOptions</code>ã«æ¸¡ã™objectã¯<code>addEventListener</code>ã®<code>options</code>ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨åŒã˜å½¹å‰²ã§ã™ã€‚</p>
<pre><code class="language-js">import {LitElement, html} from 'lit';
import {eventOptions} from 'lit/decorators.js';
//...
@eventOptions({passive: true})
private _handleTouchStart(e) { console.log(e.type) }
</code></pre>
<p>ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã†ä»¥å¤–ã«ã‚‚ã€
<a class="Link" href="https://japanese-document.github.io/lit/templates-expressions.html#Event_listener_expressions">Event listener expressions</a>ã«objectã‚’æ¸¡ã™ã“ã¨ã§
ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ãã®æ¸¡ã•ã‚Œã‚‹objectã¯<code>handleEvent()</code>ãƒ¡ã‚½ãƒƒãƒ‰ã¨<code>addEventListener()</code>ã®<code>options</code>å¼•æ•°ã®ã‚­ãƒ¼ã¨å€¤ã‚’æŒã¡ã¾ã™ã€‚</p>
<pre><code class="language-js">render() {
  return html`&lt;button @click=${{handleEvent: () =&gt; this.onClick(), once: true}}&gt;click&lt;/button&gt;`
}
</code></pre>
<h3 id="ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã—ãã¯shadow_rootã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹"><a class="anchor" href="#ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã—ãã¯shadow_rootã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹">#</a>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã—ãã¯shadow rootã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹</h3>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«Webæ¨™æº–ã®<code>addEventListener</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªèº«ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã—ã¾ã™ã€‚
è©³ã—ãã¯<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">EventTarget.addEventListener()</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã«é©ã—ãŸå ´æ‰€ã§ã™ã€‚</p>
<pre><code class="language-js">constructor() {
  super();
  this.addEventListener('click', (e) =&gt; console.log(e.type, e.target.localName));
}
</code></pre>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªèº«ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã¯event delegationã®ç”¨é€”ã§åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚ãã†ã™ã‚‹ã“ã¨ã§ã‚³ãƒ¼ãƒ‰é‡ã‚’å‰Šæ¸›ã—ãŸã‚Šã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ”¹å–„ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
è©³ã—ãã¯<a class="Link" href="#Event_delegation">event delegation</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚
é€šå¸¸ã€ã“ã®ç”¨é€”ã§ã¯ã©ã®è¦ç´ ã§ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸã‹ã¯eventã®<code>target</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§åˆ¤åˆ¥ã—ã¾ã™ã€‚</p>
<p>ã—ã‹ã—ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªèº«ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹ã¨ã€ãã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã§ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®Shadow DOMã§ç™ºç”Ÿã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã®<code>target</code>ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªèº«ã«ãªã‚Šã¾ã™ã€‚
è©³ã—ãã¯<a class="Link" href="#Shadow_DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†">Shadow DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<p>ã“ã‚Œã‚’å›é¿ã™ã‚‹ã«ã¯ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªèº«ã§ã¯ãªãã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®shadow rootè‡ªèº«ã«è¿½åŠ ã—ã¾ã™ã€‚
<code>shadowRoot</code>(<code>renderRoot</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£)ã¯<code>constructor</code>ã§ä½¿ã†ã“ã¨ãŒã§ããªã„ã®ã§ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã¯ä¸‹è¨˜ã®ã‚ˆã†ã«<code>createRenderRoot</code>ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§è¿½åŠ ã—ã¾ã™ã€‚
ã“ã®å ´åˆã€<code>createRenderRoot</code>ãƒ¡ã‚½ãƒƒãƒ‰ã¯å¿…ãšshadow rootã‚’è¿”ã•ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚</p>
<pre><code>import {LitElement, html} from 'lit';
import {customElement, property} from 'lit/decorators.js';

@customElement('my-element')
class MyElement extends LitElement {
  @property() hostName = '';
  @property() shadowName = '';

  constructor() {
    super();
    this.addEventListener('click',
      (e: Event) =&gt; this.hostName = (e.target as Element).localName);
  }

  protected createRenderRoot() {
    const root = super.createRenderRoot();
    root.addEventListener('click',
      (e: Event) =&gt; this.shadowName = (e.target as Element).localName);
    return root;
  }

  protected render() {
    return html`
      &lt;p&gt;&lt;button&gt;Click Me!&lt;/button&gt;&lt;/p&gt;
      &lt;p&gt;Component target: ${this.hostName}&lt;/p&gt;
      &lt;p&gt;Shadow target: ${this.shadowName}&lt;/p&gt;
    `;
  }
}
</code></pre>
<h3 id="ä»–ã®è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹"><a class="anchor" href="#ä»–ã®è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹">#</a>ä»–ã®è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹</h3>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªèº«ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã‚ã‚‹DOMä»¥å¤–ã®è¦ç´ (ä¾‹: <code>window</code>ã€<code>document</code>ã€ãƒ¡ã‚¤ãƒ³ã®DOMãƒ„ãƒªãƒ¼ä¸Šã«ã‚ã‚‹è¦ç´ )ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã—ãŸã„å ´åˆã€
<code>connectedCallback</code>ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã—ã¾ã™ã€‚ãã—ã¦ã€<code>disconnectedCallback</code>ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šé™¤ã—ã¾ã™ã€‚</p>
<ul>
<li><p><code>disconnectedCallback</code>ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šé™¤ã™ã‚‹å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç ´æ£„ã•ã‚ŒãŸã‚Šãƒšãƒ¼ã‚¸ä¸Šã‹ã‚‰å‰Šé™¤ã•ã‚ŒãŸæ™‚ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚</p>
</li>
<li><p>(ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚„<code>firstUpdated</code>ã®ä»£ã‚ã‚Šã«)<code>connectedCallback</code>ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒšãƒ¼ã‚¸ä¸Šã‹ã‚‰å‰Šé™¤ã•ã‚Œã¦å¾Œã«è¿½åŠ ã•ã‚ŒãŸã¨ãã«å†ã³ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãŒè¿½åŠ ã•ã‚Œã‚‹ã“ã¨ã‚’ä¿è¨¼ã—ã¾ã™ã€‚</p>
</li>
</ul>
<pre><code class="language-js">connectedCallback() {
  super.connectedCallback();
  window.addEventListener('resize', this._handleResize);
}
disconnectedCallback() {
  window.removeEventListener('resize', this._handleResize);
  super.disconnectedCallback();
}
</code></pre>
<p><code>connectedCallback</code> and <code>disconnectedCallback</code>ã®è©³ã—ã„æƒ…å ±ã¯<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements#Using_the_lifecycle_callbacks">lifecycle callbacks</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<h3 id="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š"><a class="anchor" href="#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š">#</a>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š</h3>
<p>é€šå¸¸ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹å‡¦ç†ã¯ã¨ã¦ã‚‚é«˜é€Ÿãªã®ã§ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä¸Šã®å•é¡Œã«ãªã‚Šã¾ã›ã‚“ã€‚
ã—ã‹ã—ã€é«˜é »åº¦ã§ä½¿ç”¨ã•ã‚Œã€å¤šãã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’æŒã¤ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã¯ã€
<a class="Link" href="#Event_delegation">event delegation</a>ã‚’ä½¿ã£ã¦ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šæ¸›ã—ã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã«<a class="Link" href="#éåŒæœŸã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹">éåŒæœŸã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹</a>ã“ã¨ã§åˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<h4 id="Event_delegation"><a class="anchor" href="#Event_delegation">#</a>Event delegation</h4>
<p>event delegationã‚’ç”¨ã„ã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šæ¸›ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã¾ãŸã€ã‚¤ãƒ™ãƒ³ãƒˆã®å‡¦ç†ã‚’é›†ç´„ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã‚³ãƒ¼ãƒ‰ã‚’å‰Šæ¸›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
Event delegationã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ–ãƒªãƒ³ã‚°æ™‚ã®ã¿ã‚’å–ã‚Šæ‰±ã„ã¾ã™ã€‚
è©³ã—ãã¯<a class="Link" href="#ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹">ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<p>ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ–ãƒªãƒ³ã‚°æ™‚ã¯ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸè¦ç´ ã®ç¥–å…ˆã®è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãŒä¼æ’­ã—ã¾ã™ã€‚
ã“ã®ã“ã¨ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ç¥–å…ˆã®è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã—ã¦ã€ã©ã®å­å­«è¦ç´ ã‹ã‚‰ãƒãƒ–ãƒªãƒ³ã‚°ã«ã‚ˆã£ã¦ã‚¤ãƒ™ãƒ³ãƒˆãŒdispatchã•ã‚ŒãŸã‹çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
<code>Event</code>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®<code>target</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã©ã®å­å­«è¦ç´ ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãŒdispatchã•ã‚ŒãŸã‹ç‰¹å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<h4 id="éåŒæœŸã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹"><a class="anchor" href="#éåŒæœŸã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹">#</a>éåŒæœŸã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹</h4>
<p>ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€<code>firstUpdated</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã„ã¾ã™ã€‚
ã“ã‚Œã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆå›ã«æ›´æ–°ã§ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæœ€åˆã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸå¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹Litã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ã™ã€‚</p>
<p><code>firstUpdated</code>ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åˆå›ã®æ›´æ–°ã§<code>render</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ãŸå¾Œã¨ãƒ–ãƒ©ã‚¦ã‚¶ãŒæç”»ã™ã‚‹å‰ã®é–“ã«å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚
è©³ã—ãã¯<a class="Link" href="https://japanese-document.github.io/lit/components-lifecycle.html#firstUpdated()">firstUpdated</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<p>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸå¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ã«ãƒ–ãƒ©ã‚¦ã‚¶ãŒæç”»ã—ãŸå¾Œã«è§£æ±ºã™ã‚‹Promiseã‚’awaitã—ã¾ã™ã€‚</p>
<pre><code class="language-js">async firstUpdated() {
  // ãƒ–ãƒ©ã‚¦ã‚¶ã®æç”»å‡¦ç†ã«è­²ã‚‹
  await new Promise((r) =&gt; setTimeout(r, 0));
  this.addEventListener('click', this._handleClick);
}
</code></pre>
<h3 id="ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®this"><a class="anchor" href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®this">#</a>ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®<code>this</code></h3>
<p>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå†…ã§<a class="Link" href="https://japanese-document.github.io/lit/templates-expressions.html#Event_listener_expressions">Event listener expressions</a>(<code>@</code>)ã‚’ä½¿ã£ã¦å®£è¨€çš„ã«è¿½åŠ ã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã¯è‡ªå‹•çš„ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒbindã•ã‚Œã¾ã™ã€‚</p>
<p>ã ã‹ã‚‰ã€ä¸‹è¨˜ã®ã‚ˆã†ã«å®£è¨€çš„ã«è¿½åŠ ã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã§ã¯<code>this</code>ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å‚ç…§ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<pre><code class="language-js">class MyElement extends LitElement {
  render() {
    return html`&lt;button @click="${this._handleClick}"&gt;click&lt;/button&gt;`;
  }
  _handleClick(e) {
    console.log(this.prop);
  }
}
</code></pre>
<p><code>addEventListener</code>ã‚’ä½¿ã£ã¦ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹å ´åˆã€ä¸‹è¨˜ã®ã‚ˆã†ã«<code>this</code>ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‚ç…§ã™ã‚‹ãŸã‚ã«ã‚¢ãƒ­ãƒ¼é–¢æ•°ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre><code class="language-ts">export class MyElement extends LitElement {
  private _handleResize = () =&gt; {
    // thisã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‚ç…§ã™ã‚‹
    console.log(this.isConnected);
  }

  constructor() {
    window.addEventListener('resize', this._handleResize);
  }
}
</code></pre>
<p>è©³ã—ãã¯<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this">thisã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<h3 id="ãƒ«ãƒ¼ãƒ—ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–ã‚Šæ‰±ã†"><a class="anchor" href="#ãƒ«ãƒ¼ãƒ—ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–ã‚Šæ‰±ã†">#</a>ãƒ«ãƒ¼ãƒ—ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–ã‚Šæ‰±ã†</h3>
<p>ä¸‹è¨˜ã®ã‚ˆã†ã«ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ã£ã¦è¦ç´ ã‚’ç”Ÿæˆã™ã‚‹å ´åˆã€ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ–ãƒªãƒ³ã‚°ã‚’åˆ©ç”¨ã—ã¦<a class="Link" href="#Event_delegation">event delegation</a>ã‚’ä½¿ã†ã¨ä¾¿åˆ©ã§ã™ã€‚
ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ–ãƒªãƒ³ã‚°ã—ãªã„ã‚¤ãƒ™ãƒ³ãƒˆ(focus)ã®å ´åˆã€ãƒ«ãƒ¼ãƒ—ã§ç”Ÿæˆã•ã‚Œã‚‹å„è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã¾ã™ã€‚</p>
<pre><code class="language-ts">import {LitElement, html} from 'lit';
import {customElement, property} from 'lit/decorators.js';

@customElement('my-element')
class MyElement extends LitElement {
  @property() clicked = '';
  @property() focused = '';
  data = [1, 2, 3];

  protected render() {
    return html`
      &lt;div key="container" @click=${this._clickHandler}&gt;
        ${this.data.map(i =&gt; html`
          &lt;button key=${i} @focus=${this._focusHandler}&gt;Item ${i}&lt;/button&gt;
        `)}
      &lt;/div&gt;
      &lt;p&gt;Clicked: ${this.clicked}&lt;/p&gt;
      &lt;p&gt;Focused: ${this.focused}&lt;/p&gt;
    `;
  }

  private _clickHandler(e: Event) {
    this.clicked = (e.target as Element).getAttribute('key')!;
  }

  private _focusHandler(e: Event) {
    this.focused = (e.target as Element).textContent!;
  }
}
</code></pre>
<h3 id="ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šé™¤ã™ã‚‹"><a class="anchor" href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šé™¤ã™ã‚‹">#</a>ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šé™¤ã™ã‚‹</h3>
<p><code>null</code>ã€<code>undefined</code>ã€<code>nothing</code>ã‚’<a class="Link" href="https://japanese-document.github.io/lit/templates-expressions.html#Event_listener_expressions">Event listener expressions</a>ã«æ¸¡ã™ã¨ã€æ—¢å­˜ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã¯å‰Šé™¤ã•ã‚Œã¾ã™ã€‚</p>
<h2 id="ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹"><a class="anchor" href="#ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹">#</a>ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹</h2>
<p>ã™ã¹ã¦ã®DOM Nodeã¯<code>dispatchEvent</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä¸‹è¨˜ã®ã‚ˆã†ã«ã€ç¬¬1å¼•æ•°ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚¿ã‚¤ãƒ—ã¨ç¬¬2å¼•æ•°ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦Eventã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
ãã‚Œã‚’<code>dispatchEvent</code>ã«æ¸¡ã—ã¾ã™ã€‚</p>
<pre><code class="language-js">const event = new Event('my-event', {bubbles: true, composed: true});
myElement.dispatchEvent(event);
</code></pre>
<p><a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/Event/Event#values">bubbles</a>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«<code>true</code>ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ãŸè¦ç´ ã®å…ˆç¥–æ–¹å‘ã«ã‚¤ãƒ™ãƒ³ãƒˆãŒä¼æ’­ã—ã¾ã™ã€‚
ã“ã®è¨­å®šã‚’ã—ãªã„ã¨<a class="Link" href="#Event_delegation">event delegation</a>ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚</p>
<p><code>composed</code>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’<code>true</code>ã«ã™ã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ãŸè¦ç´ ãŒæ‰€å±ã—ã¦ã„ã‚‹Shadow DOMãƒ„ãƒªãƒ¼ã®å¤–ã«ã‚‚ã‚¤ãƒ™ãƒ³ãƒˆãŒä¼æ’­ã—ã¾ã™ã€‚</p>
<p>è©³ã—ãã¯<a class="Link" href="#Shadow_DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†">Shadow DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†</a>ã¨<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent">EventTarget.dispatchEvent()</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<h3 id="ã©ã‚“ãªã¨ãã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã‹"><a class="anchor" href="#ã©ã‚“ãªã¨ãã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã‹">#</a>ã©ã‚“ãªã¨ãã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã‹</h3>
<p>ã‚¤ãƒ™ãƒ³ãƒˆã®dispatchã¯ãƒ¦ãƒ¼ã‚¶ã®æ“ä½œã‚‚ã—ãã¯ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ã‚¹ãƒ†ãƒ¼ãƒˆ(state)ã®éåŒæœŸçš„ãªå¤‰æ›´æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ã¹ãã§ã™ã€‚
Webã®ãƒã‚¤ãƒ†ã‚£ãƒ–è¦ç´ ãŒãã†ã§ã‚ã‚‹ã‚ˆã†ã«ã€ã‚³ãƒ¼ãƒ‰ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚‚ã—ãã¯å±æ€§ã‚’å¤‰æ›´ã—ãŸæ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ä¾‹ãˆã°ã€inputè¦ç´ ã«ãƒ¦ãƒ¼ã‚¶ãŒå…¥åŠ›ã—ãŸã‚‰<code>change</code>ã‚¤ãƒ™ãƒ³ãƒˆãŒdispatchã•ã‚Œã¾ã™ã€‚
ã—ã‹ã—ã€ã‚³ãƒ¼ãƒ‰ã§<code>input</code>è¦ç´ ã®<code>value</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¤‰æ›´ã—ãŸå ´åˆã€<code>change</code>ã‚¤ãƒ™ãƒ³ãƒˆã¯dispatchã•ã‚Œã¾ã›ã‚“ã€‚</p>
<p>åŒæ§˜ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é …ç›®ãŒé¸æŠã•ã‚ŒãŸã¨ãã¯ã‚¤ãƒ™ãƒ³ãƒˆãŒdispatchã•ã‚Œã‚‹ã¹ãã§ã™ã€‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®<code>selectedItem</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚»ãƒƒãƒˆã•ã‚ŒãŸå ´åˆã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>é€šå¸¸ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒªã‚¹ãƒ‹ãƒ³ã‚°ã—ã¦ã„ã‚‹ã‚¤ãƒ™ãƒ³ãƒˆã«å¿œã˜ã¦ãã‚Œã«é©ã—ãŸåˆ¥ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã§ã™ã€‚</p>
<pre><code class="language-ts">import {LitElement, html} from 'lit';
import {customElement, query} from 'lit/decorators.js';

@customElement('my-dispatcher')
class MyDispatcher extends LitElement {
  @query('input', true) _input!: HTMLInputElement;

  protected render() {
    return html`
      &lt;p&gt;Name: &lt;input&gt;&lt;/p&gt;
      &lt;p&gt;&lt;button @click=${this._dispatchLogin}&gt;Login&lt;/button&gt;&lt;/p&gt;
    `;
  }

  private _dispatchLogin() {
    const name = this._input.value.trim();
    if (name) {
      const options = {
        detail: {name},
        bubbles: true,
        composed: true
      };
      this.dispatchEvent(new CustomEvent('mylogin', options));
    }
  }
}
</code></pre>
<pre><code class="language-ts">import {LitElement, html} from 'lit';
import {customElement, property} from 'lit/decorators.js';

@customElement('my-listener')
class MyListener extends LitElement {
  @property() name = '';

  protected render() {
    return html`
      &lt;p @mylogin=${this._loginListener}&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/p&gt;
      &lt;p&gt;Login: ${this.name}&lt;/p&gt;`;
  }

  private _loginListener(e: CustomEvent) {
    this.name = e.detail.name;
  }
}
</code></pre>
<pre><code class="language-html">&lt;script type="module" src="./my-listener.js"&gt;&lt;/script&gt;
&lt;script type="module" src="./my-dispatcher.js"&gt;&lt;/script&gt;

&lt;my-listener&gt;
  &lt;my-dispatcher&gt;&lt;/my-dispatcher&gt;
&lt;/my-listener&gt;
</code></pre>
<h3 id="è¦ç´ ã®æ›´æ–°ã®å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹"><a class="anchor" href="#è¦ç´ ã®æ›´æ–°ã®å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹">#</a>è¦ç´ ã®æ›´æ–°ã®å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹</h3>
<p>ã»ã¨ã‚“ã©ã®å ´åˆã€ã‚¤ãƒ™ãƒ³ãƒˆã¯è¦ç´ ã®æ›´æ–°ã¨ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å¾Œã«ç™ºç”Ÿã™ã‚‹ã¹ãã§ã™ã€‚
ã“ã‚Œã¯ãƒ¦ãƒ¼ã‚¶ã®æ“ä½œã‹ã‚‰ç”Ÿã˜ãŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°çµæœã®å¤‰åŒ–ã‚’ä¼æ’­ã™ã‚‹ãŸã‚ã®ã‚¤ãƒ™ãƒ³ãƒˆã®å ´åˆã¯å¿…é ˆã§ã™ã€‚
ã“ã®å ´åˆã€ã‚¹ãƒ†ãƒ¼ãƒˆã®å¤‰æ›´ã®å¾Œã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹å‰ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®<code>updateComplete</code> Promiseã‚’awaitã—ã¾ã™ã€‚</p>
<pre><code class="language-ts">import {LitElement, html} from 'lit';
import {customElement, property} from 'lit/decorators.js';

@customElement('my-dispatcher')
class MyDispatcher extends LitElement {
  @property({type: Boolean}) open = true;

  protected render() {
    return html`
      &lt;p&gt;&lt;button @click=${this._notify}&gt;${this.open ? 'Close' : 'Open'}&lt;/button&gt;&lt;/p&gt;
      &lt;p ?hidden=${!this.open}&gt;Content!&lt;/p&gt;
    `;
  }

  private async _notify() {
    this.open = !this.open;
    await this.updateComplete;
    const name = this.open ? 'opened' : 'closed';
    this.dispatchEvent(new CustomEvent(name, {bubbles: true, composed: true}));
  }
}
</code></pre>
<pre><code class="language-ts">import {LitElement, html} from 'lit';
import {customElement, property} from 'lit/decorators.js';

@customElement('my-listener')
class MyListener extends LitElement {
  @property({type: Number}) height: number|null = null;

  protected render() {
    return html`
      &lt;p @opened=${this._listener} @closed=${this._listener}&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/p&gt;
      &lt;p&gt;Height: ${this.height}px&lt;/p&gt;`;
  }

  private _listener() {
    this.height = null;
  }

  protected updated() {
    if (this.height === null) {
      requestAnimationFrame(() =&gt; this.height = this.getBoundingClientRect().height);
    }
  }
}
</code></pre>
<pre><code class="language-html">&lt;script type="module" src="./my-listener.js"&gt;&lt;/script&gt;
&lt;script type="module" src="./my-dispatcher.js"&gt;&lt;/script&gt;

&lt;my-listener&gt;
  &lt;my-dispatcher&gt;&lt;/my-dispatcher&gt;
&lt;/my-listener&gt;
</code></pre>
<h3 id="Eventã¨CustomEventã‚’æ‰±ã†"><a class="anchor" href="#Eventã¨CustomEventã‚’æ‰±ã†">#</a>Eventã¨CustomEventã‚’æ‰±ã†</h3>
<p>ã‚¤ãƒ™ãƒ³ãƒˆã¯<code>Event</code>ã‚‚ã—ãã¯<code>CustomEvent</code>ã§ã™ã€‚ã©ã¡ã‚‰ã‚’ä½¿ã£ã¦ã‚‚è‰¯ã„ã§ã™ã€‚
<code>CustomEvent</code>ã‚’ä½¿ã†å ´åˆã€ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã¯<code>detail</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚»ãƒƒãƒˆã—ã¾ã™ã€‚
<code>Event</code>ã‚’ä½¿ã†å ´åˆã€<code>Event</code>ã‚¯ãƒ©ã‚¹ã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚ãã—ã¦ã€ãã‚Œã«APIã‚’è¿½åŠ ã—ã¾ã™ã€‚</p>
<p>è©³ã—ãã¯<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/Event/Event">Event</a>ã¨<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent">CustomEvent</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<h4 id="CustomEventã®ä½¿ã„æ–¹"><a class="anchor" href="#CustomEventã®ä½¿ã„æ–¹">#</a>CustomEventã®ä½¿ã„æ–¹</h4>
<pre><code class="language-js">const event = new CustomEvent('my-event', {
  detail: {
    message: 'Something important happened'
  }
});

this.dispatchEvent(event);
</code></pre>
<h4 id="Eventã®ä½¿ã„æ–¹"><a class="anchor" href="#Eventã®ä½¿ã„æ–¹">#</a>Eventã®ä½¿ã„æ–¹</h4>
<pre><code class="language-js">class MyEvent extends Event {
  constructor(message) {
    super();
    this.type = 'my-event';
    this.message = message;
  }
}

const event = new MyEvent('Something important happened');
this.dispatchEvent(event);
</code></pre>
<h2 id="Shadow_DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†"><a class="anchor" href="#Shadow_DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†">#</a>Shadow DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†</h2>
<p>Shadow DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–ã‚Šæ‰±ã†å ´åˆã®æ³¨æ„ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚
Shadow DOMã¯shadowè¦ç´ ã«é–¢ã™ã‚‹è©³ç´°ã‚’å¤–éƒ¨ã«å…¬é–‹ã›ãšã‚«ãƒ—ã‚»ãƒ«åŒ–ã—ã¾ã™ã€‚
Shadow DOMã‹ã‚‰ç”Ÿã˜ãŸã‚¤ãƒ™ãƒ³ãƒˆã¯shadowè¦ç´ ã®è©³ç´°ã‚’å¤–éƒ¨ã®DOMè¦ç´ ã«æ¸¡ã—ã¾ã›ã‚“ã€‚</p>
<h3 id="Composedã‚¤ãƒ™ãƒ³ãƒˆ"><a class="anchor" href="#Composedã‚¤ãƒ™ãƒ³ãƒˆ">#</a>Composedã‚¤ãƒ™ãƒ³ãƒˆ</h3>
<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§shadow rootå†…ã§dispatchã•ã‚ŒãŸä¸Šè¨˜ã§ä½œæˆã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã¯shadow rootã®å¤–ã«ã¯ä¼æ’­ã—ã¾ã›ã‚“ã€‚
ã‚¤ãƒ™ãƒ³ãƒˆãŒshadow domã®å¤–ã«ã‚‚ä¼æ’­ã™ã‚‹ã«ã¯<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/Event/composed"><code>composed</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</a>ã‚’<code>true</code>ã«ã—ã¾ã™ã€‚
é€šå¸¸ã€DOMãƒ„ãƒªãƒ¼ã®ã™ã¹ã¦ã®Nodeã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¼æ’­ã™ã‚‹ãŸã‚ã«<code>composed</code>ã¨ä¸€ç·’ã«<code>bubbles</code>ã‚‚<code>true</code>ã«ã—ã¾ã™ã€‚</p>
<pre><code class="language-js">_dispatchMyEvent() {
  let myEvent = new CustomEvent('my-event', {
    detail: { message: 'my-event happened.' },
    bubbles: true,
    composed: true });
  this.dispatchEvent(myEvent);
}
</code></pre>
<p>ã‚¤ãƒ™ãƒ³ãƒˆã®<code>composed</code>ã¨<code>bubbles</code>ãŒæœ‰åŠ¹ã§ã‚ã‚‹å ´åˆã€
ã‚¤ãƒ™ãƒ³ãƒˆã¯(shadow rootã®å¤–å´ã«ã‚ã‚‹è¦ç´ ã‚’å«ã‚€)ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ãŸè¦ç´ ã®ã™ã¹ã¦ã®ç¥–å…ˆè¦ç´ ã«ä¼æ’­ã—ã¾ã™ã€‚
ã‚¤ãƒ™ãƒ³ãƒˆã®<code>composed</code>ãŒæœ‰åŠ¹ã§<code>bubbles</code>ãŒç„¡åŠ¹ã§ã‚ã‚‹å ´åˆã€
ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã—ãŸè¦ç´ ã‹ã‚‰DOMãƒ„ãƒªãƒ¼ä¸Šã®shadow rootã‚’å«ã‚€è¦ç´ ã¾ã§ä¼æ’­ã—ã¾ã™ã€‚</p>
<p>ã™ã¹ã¦ã®ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã€ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å«ã‚€ã»ã¨ã‚“ã©ã®æ¨™æº–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã§ã¯<code>bubbles</code>ã¨<code>composed</code>ãŒä¸¡æ–¹æœ‰åŠ¹ã§ã™ã€‚
è©³ã—ãã¯<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/Event/composed">ã“ã¡ã‚‰</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<h3 id="Eventã®targetãƒ—ãƒ­ãƒ‘ãƒ†ã‚£"><a class="anchor" href="#Eventã®targetãƒ—ãƒ­ãƒ‘ãƒ†ã‚£">#</a>Eventã®targetãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</h3>
<p>shadow rootã‚‚ã—ãã¯ãã®ç¥–å…ˆè¦ç´ ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã§ã€
shadow rootå†…ã§dispatchã•ã‚ŒãŸ<a class="Link" href="#Composedã‚¤ãƒ™ãƒ³ãƒˆ">Composedã‚¤ãƒ™ãƒ³ãƒˆ</a>ã®targetãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯DOMãƒ„ãƒªãƒ¼ä¸Šã®shadow rootã‚’å«ã‚€è¦ç´ ã«ãªã£ã¦ã„ã¾ã™ã€‚
Litã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯shadow rootå†…ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã®ã§ã€
Litã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã‹ã‚‰dispatchã•ã‚ŒãŸComposedã‚¤ãƒ™ãƒ³ãƒˆã¯Litã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§dispatchã•ã‚ŒãŸã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚
ãã®<code>Event</code>ã®<code>target</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯Litã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚</p>
<pre><code class="language-html">&lt;my-element onClick="(e) =&gt; console.log(e.target)"&gt;&lt;/my-element&gt;
</code></pre>
<pre><code class="language-js">render() {
  return html`
    &lt;button id="mybutton" @click="${(e) =&gt; console.log(e.target)}"&gt;
      click me
    &lt;/button&gt;`;
}
</code></pre>
<p>ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ãŸè¦ç´ ã‚’å‰²ã‚Šå‡ºã—ãŸã„å ´åˆã€<code>event.composedPath()</code> APIã‚’ä½¿ã„ã¾ã™ã€‚
ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯shadow rootå†…ã®è¦ç´ ã‚’å«ã‚€ã™ã¹ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒé€šéã—ãŸNodeã®é…åˆ—ã‚’è¿”ã—ã¾ã™ã€‚
ã“ã‚Œã¯ã‚«ãƒ—ã‚»ãƒ«åŒ–ã•ã‚Œã¦ã„ã‚‹å‰æã®å®Ÿè£…ã‚’é–²è¦§ã™ã‚‹ã®ã§ã€ãã‚Œã‚‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å ´åˆã¯ãã®å®Ÿè£…ã®å¤‰æ›´ã«æ°—ã¥ã‹ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ã ã‹ã‚‰ã€shadow rootå†…ã®å®Ÿè£…ã«ä¾å­˜ã™ã‚‹ã‚ˆã†ãªå‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹éš›ã¯æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
ã“ã‚Œã®ä¸€èˆ¬çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã§ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ ãŒã‚¢ãƒ³ã‚«ãƒ¼ã‚¿ã‚°ã‹ã©ã†ã‹ã‚’åˆ¤åˆ¥ã™ã‚‹ã“ã¨ã§ã™ã€‚</p>
<pre><code class="language-js">handleMyEvent(event) {
  console.log('Origin: ', event.composedPath()[0]);
}
</code></pre>
<p>è©³ã—ãã¯<a class="Link" href="https://developer.mozilla.org/en-US/docs/Web/API/Event/composedPath">composedPath</a>ã‚’è¦‹ã¦ãã ã•ã„ã€‚</p>
<h2 id="ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹"><a class="anchor" href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹">#</a>ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹</h2>
<p>ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºä¿¡å…ƒã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã«å¤‰åŒ–ã‚’é€šçŸ¥ã™ã‚‹ãŸã‚ã«ä½¿ã‚ã‚Œã¾ã™ã€‚
ãã—ã¦ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‹ã‚‰ç™ºä¿¡å…ƒã¸ãã®ã‚¤ãƒ™ãƒ³ãƒˆã®è¿”ä¿¡ã™ã‚‹ã“ã¨ã«ã‚‚ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã“ã‚Œã‚’ã™ã‚‹1ã¤ã®æ–¹æ³•ã¯Eventã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ç™ºä¿¡å…ƒã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ“ä½œã™ã‚‹ãŸã‚ã®APIã‚’ç”¨æ„ã™ã‚‹ã“ã¨ã§ã™ã€‚
ä¾‹ãˆã°ã€ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã§CustomEventã®<code>detail</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºä¿¡å…ƒã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚»ãƒƒãƒˆã—ã¦ã€ãã‚Œã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œã‚’å¤‰æ›´ã—ã¾ã™ã€‚</p>
<p>ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºä¿¡å…ƒã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãŒã‚„ã‚Šã¨ã‚Šã‚’ã™ã‚‹ã‚‚ã†1ã¤æ–¹æ³•ã¯<code>preventDefault()</code>ã‚’ä½¿ã†æ–¹æ³•ã§ã™ã€‚
<code>preventDefault()</code>ã¯ã‚¤ãƒ™ãƒ³ãƒˆãŒæ¨™æº–ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã—ãªã„ã“ã¨ã‚’ç¤ºã™ãŸã‚ã«ä½¿ã‚ã‚Œã¾ã™ã€‚
ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãŒ<code>preventDefault()</code>ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã‚¤ãƒ™ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®<code>defaultPrevented</code>ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã‚’<code>true</code>ã«ã—ã¾ã™ã€‚
ã“ã®ãƒ•ãƒ©ã‚°ã¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãŒã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºä¿¡å…ƒã®å‹•ä½œã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã«ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<p>ã“ã®2ã¤ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã¯ä¸‹è¨˜ã®ä¾‹ã§ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚</p>
<pre><code class="language-ts">import {LitElement, html} from 'lit';
import {customElement, property} from 'lit/decorators.js';

@customElement('my-listener')
class MyListener extends LitElement {
  @property() canCheck = false;
  protected render() {
    return html`
      &lt;p @checked=${this._checkedHandler}&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/p&gt;
      &lt;hr&gt;
      &lt;p&gt;${this.canCheck ? 'Allowing' : 'Preventing'} check&lt;/p&gt;
      &lt;p&gt;&lt;button @click=${this._clickHandler}&gt;Toggle&lt;/button&gt;&lt;/p&gt;`;
  }
  private _checkedHandler(e: CustomEvent) {
    if (!this.canCheck) {
      e.preventDefault();
      e.detail.message = 'âœ… Prevented!!';
    }
  }
  private _clickHandler() {
    this.canCheck = !this.canCheck;
  }
}


@customElement('my-dispatcher')
class MyDispatcher extends LitElement {
  @property() label = 'Check me!';
  defaultMessage = 'ğŸ™‚';
  @property() message = this.defaultMessage;
  private _resetMessage?: ReturnType&lt;typeof setTimeout&gt;;
  protected render() {
    return html`
      &lt;label&gt;&lt;input type="checkbox" @click=${this._tryChange}&gt;${this.label}&lt;/label&gt;
      &lt;div&gt;${this.message}&lt;/div&gt;
    `;
  }
  private _tryChange(e: Event) {
    const detail = {message: this.message};
    const event = new CustomEvent('checked', {detail, bubbles: true, composed: true, cancelable: true});
    this.dispatchEvent(event);
    if (event.defaultPrevented) {
      e.preventDefault();
    }
    this.message = detail.message;
  }
  protected updated() {
    clearTimeout(this._resetMessage);
    this._resetMessage =
      setTimeout(() =&gt; this.message = this.defaultMessage, 1000);
  }
}

// &lt;my-listener&gt;
//   &lt;my-dispatcher&gt;&lt;/my-dispatcher&gt;
// &lt;/my-listener&gt;
</code></pre>
<hr>
<h2 id="License"><a class="anchor" href="#License">#</a>License</h2>
<h3 id="Japanese_part"><a class="anchor" href="#Japanese_part">#</a>Japanese part</h3>
<p><a class="Link" href="https://creativecommons.org/licenses/by-nc/4.0/legalcode">Creative Commons Attribution-NonCommercial 4.0 International Public License</a></p>
<p>Copyright (c) 2022 38elements</p>
<h3 id="Other"><a class="anchor" href="#Other">#</a>Other</h3>
<p><a class="Link" href="https://creativecommons.org/licenses/by/3.0/deed.en">Creative Commons Attribution 3.0 Unported</a></p>
<p>Copyright (c) 2020 Google LLC. All rights reserved.</p>
<p>BSD 3-Clause License</p>
<p>Copyright (c) 2020 Google LLC. All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p>
<ol>
<li><p>Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.</p>
</li>
<li><p>Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.</p>
</li>
<li><p>Neither the name of the copyright holder nor the names of its
contributors may be used to endorse or promote products derived from
this software without specific prior written permission.</p>
</li>
</ol>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

    </main>
    <div class="right-side"><nav class="header-list"><p class="h1"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆ">ã‚¤ãƒ™ãƒ³ãƒˆ</a></p>
<p class="h2"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°">ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°</a></p>
<p class="h3"><a href="#ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã‚‹">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’åŠ ãˆã‚‹</a></p>
<p class="h4"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹">ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã™ã‚‹</a></p>
<p class="h3"><a href="#ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã—ãã¯shadow_rootã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã—ãã¯shadow rootã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹</a></p>
<p class="h3"><a href="#ä»–ã®è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹">ä»–ã®è¦ç´ ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹</a></p>
<p class="h3"><a href="#ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å‘ä¸Š</a></p>
<p class="h4"><a href="#Event_delegation">Event delegation</a></p>
<p class="h4"><a href="#éåŒæœŸã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹">éåŒæœŸã§ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’è¿½åŠ ã™ã‚‹</a></p>
<p class="h3"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®this">ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã®this</a></p>
<p class="h3"><a href="#ãƒ«ãƒ¼ãƒ—ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–ã‚Šæ‰±ã†">ãƒ«ãƒ¼ãƒ—ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–ã‚Šæ‰±ã†</a></p>
<p class="h3"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šé™¤ã™ã‚‹">ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠã‚’å‰Šé™¤ã™ã‚‹</a></p>
<p class="h2"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹">ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹</a></p>
<p class="h3"><a href="#ã©ã‚“ãªã¨ãã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã‹">ã©ã‚“ãªã¨ãã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹ã¹ãã‹</a></p>
<p class="h3"><a href="#è¦ç´ ã®æ›´æ–°ã®å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹">è¦ç´ ã®æ›´æ–°ã®å¾Œã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’dispatchã™ã‚‹</a></p>
<p class="h3"><a href="#Eventã¨CustomEventã‚’æ‰±ã†">Eventã¨CustomEventã‚’æ‰±ã†</a></p>
<p class="h4"><a href="#CustomEventã®ä½¿ã„æ–¹">CustomEventã®ä½¿ã„æ–¹</a></p>
<p class="h4"><a href="#Eventã®ä½¿ã„æ–¹">Eventã®ä½¿ã„æ–¹</a></p>
<p class="h2"><a href="#Shadow_DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†">Shadow DOMã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ‰±ã†</a></p>
<p class="h3"><a href="#Composedã‚¤ãƒ™ãƒ³ãƒˆ">Composedã‚¤ãƒ™ãƒ³ãƒˆ</a></p>
<p class="h3"><a href="#Eventã®targetãƒ—ãƒ­ãƒ‘ãƒ†ã‚£">Eventã®targetãƒ—ãƒ­ãƒ‘ãƒ†ã‚£</a></p>
<p class="h2"><a href="#ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹">ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã¨ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠé–“ã§ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šå–ã‚Šã™ã‚‹</a></p>
<p class="h2"><a href="#License">License</a></p>
<p class="h3"><a href="#Japanese_part">Japanese part</a></p>
<p class="h3"><a href="#Other">Other</a></p></nav></div>
    <footer class="footer markdown-body">
      <a href="/lit">Top</a>
    </footer>
  </body>
</html>